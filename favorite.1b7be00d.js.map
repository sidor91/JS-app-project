{"mappings":"oeAAAA,EAAA,S,iBAKA,MAAMC,EAAa,IAAI,E,WAAAC,SACjBC,EAAqB,IAAI,EAAAC,EAAAF,SAEzBG,EAAmBC,SAASC,cAAc,mBAEvCF,EAAQG,iBAAiB,SAqBlB,SAACC,GAEK,IACjBA,EAAEC,OAAOC,QAAQ,UAElB,OAEF,MACMC,EADcH,EAAEC,OAAOC,QAAQ,oBAElCJ,cAAc,yBACdM,aAAa,QAEhBJ,EAAEC,OACCC,QAAQ,+BACRG,UAAUC,OAAO,eAEpB,MAAMC,EAAaC,EAAyBC,WAC1CC,GAAQA,EAAKC,MAAQR,IAIvB,GAF2BK,EAAFI,OAAOL,EAAY,GACbM,aAAlBC,QAAQ,WAAYC,KAAKC,UAAUR,IAC5CA,EAAyBS,OAAQ,CACnC,MAAMC,EAAiBV,EACpBW,KAAIC,GACI5B,EAAW6B,eAAeD,EAAS,iBAE3CE,KAAK,IACR1B,EAAiB2B,UAAYL,C,MAE7BtB,EAAiB2B,UAAY,4X,IAjDjC3B,EAAiBG,iBACf,QACAL,EAAmB8B,gBAAgBC,KAAK/B,IAG1C,IAAIc,EAA2BK,aAAaa,QAAQ,YAEpD,GAAIlB,GAAyD,OAA7BA,EAAmC,CACjE,MACMU,EADaH,KAAKY,MAAMnB,GAE3BW,KAAIC,GACI5B,EAAW6B,eAAeD,EAAS,iBAE3CE,KAAK,IACR1B,EAAiB2B,UAAYL,C,CAE/BV,EAA2BO,KAAKY,MAAMnB","sources":["src/favorite.js"],"sourcesContent":["import './js/dark-light_theme';\nimport LocalStorageClass from './js/localStorage';\nimport RenderNews from './js/renderNews';\n\n\nconst renderNews = new RenderNews();\nconst localStorageEntity = new LocalStorageClass();\n\nconst favoriteNewsList = document.querySelector('#favorite__news'); // контейнер\n\nfavoriteNewsList.addEventListener('click', onClick);\nfavoriteNewsList.addEventListener(\n  'click',\n  localStorageEntity.onReadMoreClick.bind(localStorageEntity),\n);\n\nlet localStorageFavoriteData = localStorage.getItem('favorite');\n\nif (localStorageFavoriteData && localStorageFavoriteData !== '[]') {\n  const parsedData = JSON.parse(localStorageFavoriteData);\n  const favoriteMarkup = parsedData\n    .map(element => {\n      return renderNews.renderNewsCard(element, 'hidden-span');\n    })\n    .join('');\n  favoriteNewsList.innerHTML = favoriteMarkup;\n}\nlocalStorageFavoriteData = JSON.parse(localStorageFavoriteData); //  массив эелементов\n\n\n\nfunction onClick(e) {\n  // при клике на add to favorite на странице favorite\n  if (\n    !e.target.closest('button')\n  ) {\n    return;\n  }\n  const choosenNews = e.target.closest('.list-news__item'); // лишка\n  const elemURL = choosenNews\n    .querySelector('.item-news__info-link')\n    .getAttribute('href');\n  \n  e.target // toggle class\n    .closest('.item-news__add-to-favorite')\n    .classList.toggle('hidden-span');\n\n  const indexOfURL = localStorageFavoriteData.findIndex(\n    item => item.url === elemURL,\n  ); // поиск индекса элемента с данным url\n  localStorageFavoriteData.splice(indexOfURL, 1); // удаление этого эелемента из массива\n  localStorage.setItem('favorite', JSON.stringify(localStorageFavoriteData)); // добавление массива в LS\n  if (localStorageFavoriteData.length) {\n    const favoriteMarkup = localStorageFavoriteData\n      .map(element => {\n        return renderNews.renderNewsCard(element, 'hidden-span');\n      })\n      .join('');\n    favoriteNewsList.innerHTML = favoriteMarkup;\n  } else {\n    favoriteNewsList.innerHTML = `<section class=\"background\">\n    <div class=\"favorite-container container\">     \n        <p class=\"background___title\">We haven't found news from this category</p>\n        <picture>\n\n          <img class=\"background___picture\" src=\"https://i.ibb.co/cFdrWFz/desktop.png\" alt=\"background-picture\" width=\"248\" height=\"198\">\n        </picture>      \n    </div>\n  </section>`;\n  }\n}\n"],"names":["parcelRequire","$f2929da3ca31033d$var$renderNews","default","$f2929da3ca31033d$var$localStorageEntity","$hbtSd","$f2929da3ca31033d$var$favoriteNewsList","document","querySelector","addEventListener","e","target","closest","elemURL","getAttribute","classList","toggle","indexOfURL","$f2929da3ca31033d$var$localStorageFavoriteData","findIndex","item","url","splice","localStorage","setItem","JSON","stringify","length","favoriteMarkup","map","element","renderNewsCard","join","innerHTML","onReadMoreClick","bind","getItem","parse"],"version":3,"file":"favorite.1b7be00d.js.map"}