{"mappings":"gfAAAA,EAAA,S,8BAIMC,EAAa,IAAI,E,WAAAC,SAEjBC,GADY,IAAI,EAAAC,EAAAF,SACK,IAAI,EAAAG,EAAAH,UAEzBI,EAAmBC,SAASC,cAAc,mBAEvCF,EAAQG,iBAAiB,SAqBlB,SAACC,GAEK,IACjBA,EAAEC,OAAOC,QAAQ,UAElB,OAEF,IACMC,EADcH,EAAEC,OAAOC,QAAQ,oBAElCJ,cAAc,yBACdM,aAAa,QAEhBJ,EAAEC,OACCC,QAAQ,+BACRG,UAAUC,OAAO,eAEpB,IAAMC,EAAaC,EAAyBC,WAC1C,SAAAC,G,OAAQA,EAAKC,MAAQR,C,IAIvB,GAF2BK,EAAFI,OAAOL,EAAY,GACbM,aAAlBC,QAAQ,WAAYC,KAAKC,UAAUR,IAC5CA,EAAyBS,OAAQ,CACnC,IAAMC,EAAiBV,EACpBW,KAAI,SAAAC,GACH,OAAO7B,EAAW8B,eAAeD,EAAS,c,IAE3CE,KAAK,IACR1B,EAAiB2B,UAAYL,C,MAE7BtB,EAAiB2B,UAAa,4X,IAjDlC3B,EAAiBG,iBACf,QACAN,EAAmB+B,gBAAgBC,KAAKhC,IAG1C,IAAIe,EAA2BK,aAAaa,QAAQ,YAEpD,GAAIlB,GAAyD,OAA7BA,EAAmC,CACjE,IACMmB,EADaZ,KAAKa,MAAMpB,GAE3BW,KAAI,SAAAC,GACH,OAAO7B,EAAW8B,eAAeD,EAAS,c,IAE3CE,KAAK,IACR1B,EAAiB2B,UAAYI,C,CAE/BnB,EAA2BO,KAAKa,MAAMpB,E","sources":["src/favorite.js"],"sourcesContent":["import './js/dark-light_theme';\nimport LocalStorageClass from './js/localStorage';\nimport FetchNews from './js/fetchNews';\nimport RenderNews from './js/renderNews';\nconst renderNews = new RenderNews();\nconst fetchNews = new FetchNews();\nconst localStorageEntity = new LocalStorageClass();\n\nconst favoriteNewsList = document.querySelector('#favorite__news'); // контейнер\n\nfavoriteNewsList.addEventListener('click', onClick);\nfavoriteNewsList.addEventListener(\n  'click',\n  localStorageEntity.onReadMoreClick.bind(localStorageEntity),\n);\n\nlet localStorageFavoriteData = localStorage.getItem('favorite');\n\nif (localStorageFavoriteData && localStorageFavoriteData !== '[]') {\n  const parsedData = JSON.parse(localStorageFavoriteData);\n  const favoriteMarkup = parsedData\n    .map(element => {\n      return renderNews.renderNewsCard(element, 'hidden-span');\n    })\n    .join('');\n  favoriteNewsList.innerHTML = favoriteMarkup;\n}\nlocalStorageFavoriteData = JSON.parse(localStorageFavoriteData); //  массив эелементов\n\n\n\nfunction onClick(e) {\n  // при клике на add to favorite на странице favorite\n  if (\n    !e.target.closest('button')\n  ) {\n    return;\n  }\n  const choosenNews = e.target.closest('.list-news__item'); // лишка\n  const elemURL = choosenNews\n    .querySelector('.item-news__info-link')\n    .getAttribute('href');\n  \n  e.target // toggle class\n    .closest('.item-news__add-to-favorite')\n    .classList.toggle('hidden-span');\n\n  const indexOfURL = localStorageFavoriteData.findIndex(\n    item => item.url === elemURL,\n  ); // поиск индекса элемента с данным url\n  localStorageFavoriteData.splice(indexOfURL, 1); // удаление этого эелемента из массива\n  localStorage.setItem('favorite', JSON.stringify(localStorageFavoriteData)); // добавление массива в LS\n  if (localStorageFavoriteData.length) {\n    const favoriteMarkup = localStorageFavoriteData\n      .map(element => {\n        return renderNews.renderNewsCard(element, 'hidden-span');\n      })\n      .join('');\n    favoriteNewsList.innerHTML = favoriteMarkup;\n  } else {\n    favoriteNewsList.innerHTML = `<section class=\"background\">\n    <div class=\"favorite-container container\">     \n        <p class=\"background___title\">We haven't found news from this category</p>\n        <picture>\n\n          <img class=\"background___picture\" src=\"https://i.ibb.co/cFdrWFz/desktop.png\" alt=\"background-picture\" width=\"248\" height=\"198\">\n        </picture>      \n    </div>\n  </section>`;\n  }\n}\n"],"names":["parcelRequire","$19661b0c25203147$var$renderNews","default","$19661b0c25203147$var$localStorageEntity","$f3Lob","$kgFuD","$19661b0c25203147$var$favoriteNewsList","document","querySelector","addEventListener","e","target","closest","elemURL","getAttribute","classList","toggle","indexOfURL","$19661b0c25203147$var$localStorageFavoriteData","findIndex","item","url","splice","localStorage","setItem","JSON","stringify","length","favoriteMarkup","map","element","renderNewsCard","join","innerHTML","onReadMoreClick","bind","getItem","$19661b0c25203147$var$favoriteMarkup","parse"],"version":3,"file":"favorite.6720532e.js.map"}