{"mappings":"gfACA,IAAAA,EAAAC,EAAA,SCkDMC,EAAiBC,SAASC,cAAc,oBACxCC,EAAYF,SAASC,cAAc,QACnCE,EAAcH,SAASC,cAAc,gBACrCG,EAAeJ,SAASC,cAAc,iBAE5CF,EAAeM,iBAAiB,SAEhC,WACEH,EAAUI,UAAUC,OAAO,YAC3BJ,EAAYG,UAAUC,OAAO,kBAC7BH,EAAaE,UAAUC,OAAO,kBAEQ,SAAlCC,aAAaC,QAAQ,SACvBD,aAAaE,QAAQ,QAAS,QAE9BF,aAAaG,WAAW,Q,IAK5B,WACE,IACwC,SAAlCH,aAAaC,QAAQ,WACvBP,EAAUI,UAAUM,IAAI,YACxBb,EAAec,SAAU,EAKf,CAAZ,MAAOC,GAAK,C,CAGhBC,GD/E2B,IAAI,EAAAlB,EAAAmB,SAA/B,IACMC,EAAmBjB,SAASC,cAAc,mBACvCgB,EAAQZ,iBAAiB,SAkBlB,SAACa,GAGL,IACPA,EAAEC,OAAOC,QAAQ,UAElB,OAEF,IACMC,EADcH,EAAEC,OAAOC,QAAQ,oBACdE,QAAQD,GAC/BH,EAAEC,OACCC,QAAQ,+BACRd,UAAUC,OAAO,eAEpB,IAAMgB,EAAMC,EAAyBC,WAAU,SAAAC,G,OAAQA,EAAKL,KAAOA,C,IAGnE,GAF0BG,EAADG,OAAOJ,EAAK,GACNf,aAAlBE,QAAQ,WAAYkB,KAAKC,UAAUL,IAC5CA,EAAyBM,OAAQ,CACnC,IAAMC,EAAiBP,EACpBQ,KAAI,SAAAC,GACH,OAAOA,EAAQC,M,IAEhBC,KAAK,IACRlB,EAAiBmB,UAAYL,C,MAE7Bd,EAAiBmB,UAAa,4X,IAzClC,IAAIZ,EAA2BhB,aAAaC,QAAQ,YAEpD,GAAIe,GAAyD,OAA7BA,EAAmC,CACjE,IACMa,EADaT,KAAKU,MAAMd,GAE3BQ,KAAI,SAAAC,GACH,OAAOA,EAAQC,M,IAEhBC,KAAK,IACRlB,EAAiBmB,UAAYC,C,CAI/Bb,EAA2BI,KAAKU,MAAMd,E","sources":["src/favorite.js","src/js/dark-light_theme.js"],"sourcesContent":["// import './js/localStorage';\nimport LocalStorageClass from './js/localStorage';\nimport './js/dark-light_theme';\n\nconst localStorageEntity = new LocalStorageClass(); // localStorageEntity.onAddToFavoriteClick.bind(localStorageEntity)\nconst favoriteNewsList = document.querySelector('#favorite__news'); // контейнер\nfavoriteNewsList.addEventListener('click', onClick);\n\nlet localStorageFavoriteData = localStorage.getItem('favorite');\n\nif (localStorageFavoriteData && localStorageFavoriteData !== '[]') {\n  const parsedData = JSON.parse(localStorageFavoriteData);\n  const favoriteMarkup = parsedData\n    .map(element => {\n      return element.markup;\n    })\n    .join('');\n  favoriteNewsList.innerHTML = favoriteMarkup;\n}\n\n\nlocalStorageFavoriteData = JSON.parse(localStorageFavoriteData); //  массив эелементов\n\n\nfunction onClick(e) {\n  // при клике на add to favorite\n\n  if (\n    !e.target.closest('button')\n  ) {\n    return;\n  }\n  const choosenNews = e.target.closest('.list-news__item'); // лишка\n  const id = choosenNews.dataset.id;\n  e.target // toggle class\n    .closest('.item-news__add-to-favorite')\n    .classList.toggle('hidden-span');\n\n  const idX = localStorageFavoriteData.findIndex(item => item.id === id); // id элемента по которому кликнули\n  localStorageFavoriteData.splice(idX, 1); // удаление этого эелемента из массива\n  localStorage.setItem('favorite', JSON.stringify(localStorageFavoriteData)); // добавление массива в LS\n  if (localStorageFavoriteData.length) {\n    const favoriteMarkup = localStorageFavoriteData\n      .map(element => {\n        return element.markup;\n      })\n      .join('');\n    favoriteNewsList.innerHTML = favoriteMarkup;\n  } else {\n    favoriteNewsList.innerHTML = `<section class=\"background\">\n    <div class=\"favorite-container container\">     \n        <p class=\"background___title\">We haven't found news from this category</p>\n        <picture>\n\n          <img class=\"background___picture\" src=\"https://i.ibb.co/cFdrWFz/desktop.png\" alt=\"background-picture\" width=\"248\" height=\"198\">\n        </picture>      \n    </div>\n  </section>`;\n  }\n}\n","// window.addEventListener('load', windowLoad);\n\n// function windowLoad() {\n//   const htmlBlock = document.documentElement;\n\n//   const saveUserTheme = localStorage.getItem('user-theme');\n\n//   let userTheme;\n//   if (window.matchMedia) {\n//     userTheme = window.matchMedia('(prefers-color-scheme: dark)').matches\n//       ? 'dark'\n//       : 'light';\n//   }\n//   window\n//     .matchMedia('(prefers-color-scheme: dark)')\n//     .addEventListener('change', e => {\n//       !saveUserTheme ? changeTheme() : null;\n//     });\n\n//   const themeButton = document.querySelector('.switch-checkbox');\n//   if (themeButton) {\n//     themeButton.addEventListener('click', function (e) {\n//       changeTheme(true);\n//     });\n//   }\n// }\n\n// function setThemeClass() {\n//   if (saveUserTheme) {\n//     htmlBlock.classList.add(saveUserTheme);\n//   } else {\n//     htmlBlock.classList.add(userTheme);\n//   }\n// }\n\n// setThemeClass();\n\n// function changeTheme(saveTheme = false) {\n//   let currentTheme = htmlBlock.classList.contains('light') ? 'light' : 'dark';\n//   let newTheme;\n\n//   if (currentTheme === 'light') {\n//     newTheme = 'dark';\n//   } else if (currentTheme === 'dark') {\n//     newTheme = 'light';\n//   }\n//   htmlBlock.classList.remove(currentTheme);\n//   htmlBlock.classList.add(newTheme);\n//   saveTheme ? localStorage.setItem('user-theme', newTheme) : null;\n// }\n\nconst changeThemeBtn = document.querySelector('.switch-checkbox');\nconst bodyTheme = document.querySelector('body');\nconst themeDarkEl = document.querySelector('.theme__dark');\nconst themeLightEl = document.querySelector('.theme__light');\n\nchangeThemeBtn.addEventListener('click', changeTheme);\n\nfunction changeTheme() {\n  bodyTheme.classList.toggle('darkMode');\n  themeDarkEl.classList.toggle('opacityForDark');\n  themeLightEl.classList.toggle('opacityForDark');\n  // localStorage.setItem('theme', 'dark');\n  if (localStorage.getItem('theme') !== 'dark') {\n    localStorage.setItem('theme', 'dark');\n  } else {\n    localStorage.removeItem('theme');\n  }\n  // addDarkClassToHTML();\n}\n\nfunction addDarkClassToHTML() {\n  try {\n    if (localStorage.getItem('theme') === 'dark') {\n      bodyTheme.classList.add('darkMode');\n      changeThemeBtn.checked = true;\n    }\n    // else {\n    //   bodyTheme.classList.remove('theme-dark');\n    // }\n  } catch (err) {}\n}\n\naddDarkClassToHTML();\n"],"names":["$kgFuD","parcelRequire","$5d893aee9f42fef5$var$changeThemeBtn","document","querySelector","$5d893aee9f42fef5$var$bodyTheme","$5d893aee9f42fef5$var$themeDarkEl","$5d893aee9f42fef5$var$themeLightEl","addEventListener","classList","toggle","localStorage","getItem","setItem","removeItem","add","checked","err","$5d893aee9f42fef5$var$addDarkClassToHTML","default","$19661b0c25203147$var$favoriteNewsList","e","target","closest","id","dataset","idX","$19661b0c25203147$var$localStorageFavoriteData","findIndex","item","splice","JSON","stringify","length","favoriteMarkup","map","element","markup","join","innerHTML","$19661b0c25203147$var$favoriteMarkup","parse"],"version":3,"file":"favorite.f5d2544c.js.map"}